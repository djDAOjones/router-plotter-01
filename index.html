<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Route Plotter - Interactive Map Animation Tool</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="header-left"></div>
            <div class="header-center">
                <h1>Route Plotter</h1>
            </div>
            <div class="header-right"></div>
        </header>

        <main>
            <!-- Image Display Area (also upload area) -->
            <div class="image-container">
                <input type="file" id="imageUpload" accept="image/*" class="file-input">
                <div id="canvasWrapper" class="drop-zone">
                    <canvas id="mapCanvas"></canvas>
                    <div id="placeholder" class="placeholder">
                        <div class="placeholder-content">
                            <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="7 10 12 15 17 10"></polyline>
                                <line x1="12" y1="15" x2="12" y2="3"></line>
                            </svg>
                            <p>Click to upload or drag & drop an image</p>
                            <p class="placeholder-hint">JPG, PNG, GIF supported</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Playback Controls Row -->
            <div class="controls-row playback-row">
                <button id="playPauseBtn" class="btn btn-play" disabled>
                    <span id="playPauseIcon">‚ñ∂Ô∏è</span> <span id="playPauseText">Play</span>
                </button>
                <button id="resetBtn" class="btn btn-reset" disabled>üîÑ Reset</button>
                <button id="togglePauseMode" class="btn btn-toggle" disabled>
                    <span id="pauseModeText">Pause at Waypoints</span>
                </button>
                <div class="control-group-inline">
                    <label for="pauseDuration">Pause (s):</label>
                    <input type="number" id="pauseDuration" min="0" max="10" value="2" step="1">
                </div>
                <div class="control-group-inline speed-control">
                    <label for="speedSlider">Speed:</label>
                    <input type="range" id="speedSlider" min="0" max="4" value="2" step="1" list="speedMarkers">
                    <datalist id="speedMarkers">
                        <option value="0" label="0.25x"></option>
                        <option value="1" label="0.5x"></option>
                        <option value="2" label="1x"></option>
                        <option value="3" label="2x"></option>
                        <option value="4" label="4x"></option>
                    </datalist>
                    <span id="speedDisplay">1x</span>
                </div>
                <button id="toggleNamesVisibility" class="btn btn-toggle" disabled>
                    <span id="namesVisibilityText">Names: Always</span>
                </button>
                <button id="toggleBeacons" class="btn btn-toggle" disabled>
                    <span id="beaconsText">Beacons: Off</span>
                </button>
            </div>

            <!-- Design Controls Row -->
            <div class="controls-row design-row">
                <button id="clearBtn" class="btn btn-danger" disabled>üóëÔ∏è Clear</button>
                <button id="undoBtn" class="btn btn-secondary" disabled>‚Ü©Ô∏è Undo</button>
                <button id="newWaypointBtn" class="btn btn-primary" disabled>üìç New Waypoint</button>
                <div class="control-group-inline">
                    <label for="lineColor">Color:</label>
                    <input type="color" id="lineColor" value="#FF6B6B">
                </div>
                <div class="control-group-inline">
                    <label for="lineThickness">Thickness:</label>
                    <input type="range" id="lineThickness" min="1" max="20" value="5">
                    <span id="thicknessValue">5</span>px
                </div>
            </div>

            <!-- Save/Load/Export Row -->
            <div class="controls-row export-row">
                <button id="saveBtn" class="btn btn-save" disabled>üíæ Save</button>
                <button id="loadBtn" class="btn btn-load">üìÇ Load</button>
                <input type="file" id="importFile" accept=".json" class="file-input">
                <button id="exportBtn" class="btn btn-export" disabled>üé• Export</button>
                <div class="demo-buttons">
                    <button id="demo1Btn" class="btn btn-demo">Demo 1</button>
                    <button id="demo2Btn" class="btn btn-demo">Demo 2</button>
                    <button id="demo3Btn" class="btn btn-demo">Demo 3</button>
                </div>
            </div>

            <!-- Waypoint List (Collapsible) -->
            <div class="waypoint-section">
                <div class="waypoint-header" id="waypointHeader">
                    <h3>Waypoints (<span id="waypointCount">0</span>)</h3>
                    <button id="toggleWaypoints" class="btn-toggle-list">‚ñº Show</button>
                </div>
                <div id="waypointList" class="waypoint-list hidden"></div>
            </div>
        </main>

        <!-- Waypoint Name Modal -->
        <div id="waypointModal" class="modal">
            <div class="modal-content">
                <h3>Name this Waypoint</h3>
                <input type="text" id="waypointNameInput" placeholder="Enter waypoint name">
                <div class="modal-buttons">
                    <button id="saveWaypointName" class="btn btn-success">Save</button>
                    <button id="cancelWaypoint" class="btn btn-secondary">Cancel</button>
                </div>
            </div>
        </div>

        <!-- Initial Waypoint Modal -->
        <div id="initialModal" class="modal active">
            <div class="modal-content">
                <h3>Welcome to Route Plotter</h3>
                <p>Name your first waypoint to begin:</p>
                <input type="text" id="initialWaypointInput" placeholder="e.g., Start" value="Start">
                <div class="modal-buttons">
                    <button id="startApp" class="btn btn-success">Start</button>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>